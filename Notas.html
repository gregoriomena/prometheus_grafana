<html>
	<head>
		<style>
		</style>
	</head>
	<body>
		<div title="Datos curso" style='border:2px black solid; padding-left: 25px;'>
			<h1 style='margin-bottom: 0px;'>Monitoreo con Prometheus, Grafana, Spring boot y Docker</h1>
			<hr/>
			<ul style='margin-top: 5px;'>
				<li>Autor: Alejandro Agapito Bautista</li>
				<li>Fuente: <a href="https://www.udemy.com/course/devs4j-monitoring/">Udemy</a>
				</li>
				<li>Duración: 3,5 horas de vídeo</li>
			</ul>
			<hr/>
		</div>
		<ul>
			<li>
				Sección 1: Introducción a Micrometer
				<ul>
					<li>1. Introducción</li>
					<li><a href="#sec12">2. Características de un sistema de monitoreo</a></li>
					<li>3. Creación de un proyecto simple de Micrometer</li>
					<li><a href="#sec14">4. Uso del MeterRegistry</a></li>
					<li><a href="#sec15">5. Uso del CompositeMeterRegistry</a></li>
					<li><a href="#sec16">6. Uso del GlobalRegistry</a></li>
					<li><a href="#sec17">7. Tipos de Medidas</a></li>
					<li><a href="#sec18">8. Convención de nombres en los sistemas de monitoreo</a></li>
					<li><a href="#sec19">9. Uso de Counters</a></li>
					<li><a href="#sec110">10. Uso de Timers</a></li>
					<li><a href="#sec111">11. Uso de Gauge</a></li>
				</ul>
			</li>
		</ul>
		
		<span id="sec12">
			<h3>1.2 - Características de un sistema de monitoreo</h3>
			<ul>
			<li><b>Dimensionamiento:</b> Existen sistemas jerárquicos (podremos navegar a través de las métricas y existe una dependencia entre ellas) y dimensional, las métricas se aplanan y no existe una jerarquía pero tienen tags que 
			permiten clasificar la información. Por ejemplo, si tengo una métrica que es el sueldo promedio, aplicaría a todos los empleados, pero a esa métrica le puedo agregar un tag que sea el puesto.</li>
			<li><b>Rate agregation:</b> Cuando se simplifica un conjunto de datos, por ejemplo agrupándolos (promedio, suma, ...) en un periodo de tiempo.</li>
			<li><b>Publishing:</b> Algunos sistemas esperan consumir métricas desde las aplicaciones y otros esperan que se publiquen de forma regular. (Prometheus es del tipo que las consume)</li>
			</ul>
		</span>
		<span id="sec14">
			<h3>1.4. Uso del MeterRegistry</h3>
			Una Medida es la interfaz para recolectar un conjunto de datos sobre tu aplicación. En Micrometer una medida se crea y mantiene en un MeterRegistry. Cada sistema de monitoreo tiene su propia implementación del MeterRegistry (por ejemplo, Prometheus tiene la suya).
			<br />
			<br />
			La implementación de Micrometer del MeterRegistry se llama SimpleMeterRegistry, la cual mantiene el último valor de cada medida en memoria y no exporta la información a ningún lugar. Ideal en caso de que no tengas alguna preferencia con un sistema de monitoreo (SimpleMeterRegistry es como el log4j en los logs)
			<br />
			<br />
			En aplicaciones basadas en Spring SimpleMeterRegistry es inyectado por default, si se incluye la dependencia de Prometheus el registry por default es PrometheusMeterRegistry
		</span>
		<span id="sec15">
			<h3>1.5. Uso del CompositeMeterRegistry</h3>
			Micrometer provee un CompositeMeterRegistry donde puedes agregar múltiples registros, permitiendo publicar métricas a más de un sistema de monitoreo de forma simultanea.
			<br />
			<br />
			Podría ser una opción si por ejemplo se está migrando de un sistema a otro y mientras queremos publicar para ambos.
		</span>
		<span id="sec16">
			<h3>1.6. Uso del GlobalRegistry</h3>
			Micrometer provee un registro global static, para acceder a el puedes utilizar. Gracias a esto evitamos tener que crear el MeterRegistry en cada punto de la aplicación donde se quiera usar.
		</span>
		<span id="sec17">
			<h3>1.7. Tipos de Medidas</h3>
			Micrometer viene con un conjunto de medidas soportadas entre las que se encuentran:
			<ul>
				<li>Timer</li>
				<li>Counter</li>
				<li>Gauge</li>
				<li>DistributionSummary</li>
				<li>LongTaskTimer</li>
				<li>FunctionCounter</li>
				<li>TimeGauge</li>
			</ul>	
			Una medida es identificada por su nombre y dimensión. Se utiliza el término dimensión y tags de forma indistinta. Dimensiones permiten a un nombre de métrica en particular ser partida para analizar los datos a profundidad.
		</span>
		<span id="sec18">
			<h3>1.8. Convención de nombres en los sistemas de monitoreo</h3>
			Micrometer emplea una convención de nombres que utiliza minúsculas separadas con un '.' punto. Diferentes sistemas de monitoreo tienen diferentes sistemas de nombrado por lo que cada implementación de micrometer viene con un transformador a la estructura recomendada, puedes sobreescribir la convención de nombres por defaul implementando la interfaz NamingConvention
		</span>
		<span id="sec19">
			<h3>1.9. Uso de Counters</h3>
			Un Counter reporta simplemente un contador sobre la propiedad específica de una aplicación. A continuación un ejemplo: meterRegistry.counter("devs4j.students", "profile","frontend").increment();
			<br /><a href="https://micrometer.io/docs/concepts#_counters">Documentación</a>
		</span>
		<span id="sec110">
			<h3>1.10. Uso de Timers</h3>
			Para medir latencias o frecuencia de eventos puedes utilizar Timers. Igual que los counters, se pueden crear a través de registry o con un builder. <a href="https://micrometer.io/docs/concepts#_timers">Documentación</a>
		</span>
		<span id="sec111">
			<h3>1.11. Uso de Gauge</h3>
			Un Gauge muestra el valor actual de una medida, son utilizados para monitorear estadísticas de cache, colecciones, etc.
		</span>
	</body>
</html>